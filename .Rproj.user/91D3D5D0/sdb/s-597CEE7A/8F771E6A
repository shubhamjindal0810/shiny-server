{
    "contents" : "############## Printing bar codes for Flipkart, Amazon, Snapdeal Fulfillment\n\n\n#Dependencies:\n# rPython\n# data.table\n# png\n\nlibrary( rPython )\nlibrary( data.table )\n\nplotImage <- function( metadata, logo, img1, barcodeSKU, SKU, blank = 0,  plotLogo = 1 ){\n  plot( 1 : 2, type = 'n', yaxt = 'n', xaxt = 'n', ylab = '', xlab = '', bty = 'n' )#for no border\n  if( blank == 0 ){\n    text( 1, 1.77, metadata, pos = 4, cex = 0.75)\n    if( plotLogo == 1) rasterImage( logo, 1.61, 1.67, 2.0 , 1.84 )\n    rasterImage( img1, 0.94, 1.19, 2.06, 1.64 )\n    text( 1.5, 1.12, paste( \"AMAZON FNSKU :\", barcodeSKU ), cex = 0.85 )\n    #rasterImage( img2, 1.001, 1.1, 1.999, 1.3 )\n    text( 1.5, 1.03, paste( \"SKU:\", SKU ) , cex = 0.85 )\n    #box( )#lty = '1373', col = 'black' )\n  }\n}\n\nprintBarcode <- function( orderFile ){\n  \n  \n  setwd( \"C:/Users/Shubham/Documents/\")\n  library( data.table )\n  library( rPython )\n  library( png )\n  pythonCode <- \"python.py\"\n  pythonFunction <- \"jindsh\"\n \n  tempImageName <- \"temp.png\"\n  orderFile <- \"data.csv\"\n  plotLogo = 1\n  \n  order <- data.table( read.csv( orderFile ) )\n  code <- readChar( pythonCode, nchars = 100000 )\n  python.exec( code )\n  pdf( file = \"test.pdf\", onefile = TRUE, paper = \"a4\", bg = \"white\", width = 7.8, height = 11 )\n  par( mfrow = c( 8, 3 ), mar = rep( 0.5, 4 ) )\n  \n  \n  for ( i in 1 : nrow( order ) ){\n    if( order$Quantity[ i ] > 0 ){\n      barcodeSKU <- order$fnsku[ i ]\n      SKU <- order$sku[ i ]\n      python.call( pythonFunction, barcodeSKU, tempImageName )\n      img1 <- readPNG( tempImageName )\n      name <- order$product.name[ i ]\n      gen <- \"Imported by Jindal Trading Company, Hyderabad\"\n      mrp <- paste( \"MRP: \", order$MRP[ i ], \" INR\", sep = \"\" )\n      month <- paste( \"Import Month : \", order$Import.Month[ i ], sep = \"\" )\n      logoImage <- paste( order$Brand..Wizzit.JT.dbrand.None.[ i ], \".png\", sep = \"\" )\n      logo <- readPNG( logoImage )\n      metadata <- paste( gen, mrp, name, month, sep = \"\\n\" )\n      for ( j in 1 : order$Quantity[ i ] ){\n          plotImage( metadata, logo, img1, barcodeSKU, SKU, plotLogo = plotLogo )\n      }\n      k = 3 - j%%3\n      for( l in 1 : k ){\n        plotImage( metadata, logo, img1, barcodeSKU, SKU, blank = 1, plotLogo = plotLogo )\n      }\n    }\n  }\n  dev.off( )\n}\n\n\n\n\n\n\nflipkartSticker <- function( orderFile ){\n  setwd( \"C:/Users/Shubham/Documents/\")\n  library( data.table )\n  library( png )\n  \n  tempImageName <- \"temp.png\"\n  orderFile <- \"flip.csv\"\n  plotLogo <- 1\n  \n  order <- data.table( read.csv( orderFile ) )\n  pdf( file = \"test.pdf\", onefile = TRUE, paper = \"a4\", bg = \"white\", width = 7.8, height = 11 )\n  par( mfrow = c( 8, 3 ), mar = rep( 0.5, 4 ) )\n  \n  \n  for ( i in 1 : nrow( order ) ){\n    if( order$Quantity[ i ] > 0 ){\n      \n      gen <- \"Manufactured and imported from dbrand inc, Canada\\nby Jindal Trading Company\"\n      SKU <- paste( \"SKU: \", order$Seller.SKU.Id[ i ], sep = \"\" )\n      fsn <- paste( \"FSN: \", order$Flipkart.Serial.Number[ i ], sep = \"\" )\n      modelID <- paste( \"Model ID: \", order$Model.ID[ i ], sep = \"\" )\n      #mrp <- paste( \"MRP: \", order$MRP[ i ], \" INR\", sep = \"\" )\n      mrp <- \"MRP: 2999/- INR\"\n      color <- paste( \"Color: \", order$Color[ i ], sep = \"\" )\n      comp <- paste( \"Compatibility: \", order$Compatibility[ i ], sep = \"\" )\n     # month <- paste( \"Import Month : \", order$Import.Month[ i ], sep = \"\" )\n      month <- \"Import month: Sep-15\"\n      name <- order$Product.Title[ i ]\n     \n      \n      logoImage <- paste( \"dbrand\", \".png\", sep = \"\" )\n      logo <- readPNG( logoImage )\n      \n      img1 <- readPNG( \"None.png\" )\n      \n      metadata <- paste( gen, modelID, mrp, color, month, comp, sep = \"\\n\" )\n      for ( j in 1 : order$Quantity[ i ] ){\n        plotFlipImage( metadata, logo, fsn, SKU, plotLogo = plotLogo )\n      }\n      k = 3 - j%%3\n      #for( l in 1 : k ){\n      #  plotFlipImage( metadata, logo, fsn, SKU, blank = 1, plotLogo = plotLogo )\n      #}\n    }\n  }\n  dev.off( )\n}\n\nplotFlipImage <- function( metadata, logo, barcodeSKU, SKU, blank = 0,  plotLogo = 1 ){\n  plot( 1 : 2, type = 'n', yaxt = 'n', xaxt = 'n', ylab = '', xlab = '' )#, bty = 'n' )#for no border\n  if( blank == 0 ){\n    text( 0.95, 1.5, metadata, pos = 4, cex = 0.85)\n    if( plotLogo == 1) rasterImage( logo, 1.61, 1.5, 2.0 , 1.67 )\n    #rasterImage( img1, 0.94, 1.19, 2.06, 1.64 )\n    text( 1.5, 1.18, paste( barcodeSKU ), cex = 0.95 )\n    #rasterImage( img2, 1.001, 1.1, 1.999, 1.3 )\n    text( 1.5, 1.03, paste( SKU ) , cex = 0.95 )\n    #box( )#lty = '1373', col = 'black' )\n  }\n  if( blank == 1 ){\n    text ( 1.5, 1.5, \"//SKU CHANGE//\", pos = 4, cex = 1 )\n  }\n}\n\n\n\n\nuploadAmazon <- function( scanFile, linkFile = \"order.csv\", templateFile = \"fba_template.csv\", outputFile = \"upload.txt\" ){\n  scan <- read.csv( scanFile )\n  data <- data.table( fsn = scan$fsn )\n  dataCount <- data.table( count( data, \"fsn\" ) )\n  link <- data.table( read.csv( linkFile ) )\n  setnames( link, \"fsn\", \"FSN\" )\n  dataCount[ , SKU := link$sku[ which( as.character( link$FSN ) == fsn ) ] ]\n  final <- data.table( MerchantSKU = dataCount$SKU, Quantity = dataCount$freq )\n  final <- data.frame( final )\n  template <- data.frame( read.csv( templateFile ), stringsAsFactors = FALSE )\n  template[ , c( 1, 2 ) ] <- sapply( template[ , c( 1, 2 ) ],as.character )\n  final[ ,1 ] <- sapply( final[ , 1 ], as.character )\n  for ( i in 1 : nrow( final ) ){\n    template[ ( 11 + i ), 1 : 2 ] <- final[ i, 1 : 2 ]\n  }\n  write.table( template, outputFile, row.names = FALSE, sep = \"\\t\", eol = \"\\n\", quote = FALSE )\n}\n\nmainFileTable <- read.csv( mainFile )\n\npredictOrder <- function ( file ){\n  install.packages( \"data.table\" )\n  library( data.table )\n  file = \"C:/Users/Shubham/Downloads/205493774016675.txt\"\n  data <- data.table( read.csv( file, sep = \"\\t\" ) )\n  timestamp <- data$timestamp[ 1 ]\n  data[, weeks.of.cover.min := min( as.factor( weeks.of.cover.t7 ), as.factor( weeks.of.cover.t30 ), as.factor( weeks.of.cover.t90 ), as.factor( weeks.of.cover.t180 ), as.factor( weeks.of.cover.t365 ) ) ]\n  \n  index <- which( as.character( data$weeks.of.cover.t7 ) == \"Infinite\" )\n  data$weeks.of.cover.t7[ index ] <- rep( Inf, length( index ) )                 \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
    "created" : 1442742073442.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2910971514",
    "id" : "8F771E6A",
    "lastKnownWriteTime" : 1442742217,
    "path" : "C:/Users/Shubham/Dropbox/Paymint/sticker/Amazon/warehouse_management_1.R",
    "project_path" : "warehouse_management_1.R",
    "properties" : {
    },
    "relative_order" : 3,
    "source_on_save" : false,
    "type" : "r_source"
}